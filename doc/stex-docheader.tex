\RequirePackage{paralist}
\ifcsname stexdocpath\endcsname\else\def\stexdocpath{.}\fi
\documentclass[full]{l3doc}
%\RequirePackage{document-structure}
\usepackage[hyperref=auto,style=alphabetic]{biblatex}
%\usepackage[mathhub=\stexdocpath/mh,usedeps]{stex}
\usepackage[lang={de,en}]{stex}

\usepackage{rustex}
\usepackage{stex-highlighting,stexthm}

\makeatletter
\providecommand{\HTML}{\textsc{html}\xspace}%
\providecommand{\XML}{\textsc{xml}\xspace}%
\providecommand{\PDF}{\textsc{pdf}\xspace}%
\providecommand\openmath{\textsc{OpenMath}\xspace}
\providecommand\OMDoc{\textsc{OMDoc}\xspace}
\DeclareRobustCommand\LaTeXML{L\kern-.36em%
        {\sbox\z@ T%
         \vbox to\ht\z@{\hbox{\check@mathfonts
                              \fontsize\sf@size\z@
                              \math@fontsfalse\selectfont
                              A}%
                        \vss}%
        }%
        \kern-.15em%
%        T\kern-.1667em\lower.5ex\hbox{E}\kern-.125em\relax
%        {\tt XML}}
        T\kern-.1667em\lower.4ex\hbox{E}\kern-0.05em\relax
        {\scshape xml}\xspace}%
\def\mmt{\textsc{Mmt}\xspace}
\makeatother


\newif\ifhadtitle\hadtitlefalse

\def\stexversion{3.3.0}
\def\changedate{\today}
\def\stextoptitle#1#2{\title{#1\thanks{Version {\stexversion} (last revised {\changedate})} }\def\thispkg{#2}}

\author{Michael Kohlhase, Dennis Müller\\
 	FAU Erlangen-Nürnberg\\
 	\url{http://kwarc.info/}
}

\def\stexmaketitle{\ifhadtitle\else\hadtitletrue\maketitle\fi}

\ExplSyntaxOn

  \def\docmodule{
    \begin{document}
      \EnableManual
      \EnableDocumentation
      \EnableImplementation
      \stexmaketitle
      \tableofcontents
      \int_gincr:N \l_stex_docheader_sect
      \usemodule[sTeX/Documentation]{macros?AllMacros}
      \DocInput{\jobname.dtx}
      \clearpage
      \PrintIndex
    \end{document}
  }

  \bool_new:N \g_stexdoc_typeset_manual_bool
  \NewDocumentCommand \EnableManual {}{
    \bool_gset_true:N \g_stexdoc_typeset_manual_bool
  }
  \NewDocumentCommand \DisableManual {}{
    \bool_gset_false:N \g_stexdoc_typeset_manual_bool
  }
  \NewDocumentEnvironment {stexmanual} {} {
    \bool_if:NTF \g_stexdoc_typeset_manual_bool
      {\bool_set_false:N \l__codedoc_in_implementation_bool}
      {\comment}
  }{
    \bool_if:NF \g_stexdoc_typeset_manual_bool {\endcomment}
  }
\ExplSyntaxOff

%\usepackage{makeidx}
%\makeindex

%\usepackage{document-structure}

\mhinput[sTeX/Documentation]{../lib/examples.tex}

\makeatletter
\newcount\example@counter\example@counter=0
\newtcolorbox{exampleborderbox}[1][]{
  empty,
  title={Example \the\example@counter #1},
  attach boxed title to top left,
     minipage boxed title,
  boxed title style={empty,size=minimal,toprule=0pt,top=1pt,left=3mm,overlay={}},
  coltitle=blue,fonttitle=\bfseries,
  parbox=false,boxsep=0pt,left=3mm,right=0mm,top=2pt,breakable,pad at break=0mm,
     before upper=\csname @totalleftmargin\endcsname0pt, 
  overlay unbroken={\draw[blue,line width=2pt] ([xshift=-0pt]title.north west) -- ([xshift=-0pt]frame.south west); },
  overlay first={\draw[blue,line width=2pt] ([xshift=-0pt]title.north west) -- ([xshift=-0pt]frame.south west); },
  overlay middle={\draw[blue,line width=2pt] ([xshift=-0pt]frame.north west) -- ([xshift=-0pt]frame.south west); },
  overlay last={\draw[blue,line width=2pt] ([xshift=-0pt]frame.north west) -- ([xshift=-0pt]frame.south west); },
  outer arc=4pt%
}

\ExplSyntaxOn
\stexstyleexample{
  \global\advance\example@counter by 1
  \tl_if_empty:NTF\thistitle{
    \begin{exampleborderbox}
  }{
    \begin{exampleborderbox}[ (\thistitle)]
  }
}{
    \end{exampleborderbox}
}

\ExplSyntaxOff\makeatother

\usetikzlibrary{calc}

\def\textwarning{\includegraphics[width=1.2em]{stex-dangerous-bend}\xspace}
\newtcolorbox{dangerbox}{
  breakable,
  enhanced,
  left=0pt,
  right=0pt,
  top=8pt,
  bottom=8pt,
  colback=white,
  colframe=red,
  width=\textwidth,
  enlarge left by=0mm,
  boxsep=5pt,
  fontupper=\small,
  arc=4pt,
  outer arc=4pt,
  leftupper=1.5cm,
  overlay={
    \node[anchor=west] at ([xshift=10pt]$(frame.north west)!0.5!(frame.south west)$)
       {\includegraphics[width=1cm,height=1cm]{stex-dangerous-bend}};}
}