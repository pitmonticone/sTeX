\RequirePackage{paralist}
\documentclass[full,kernel]{l3doc}
\usepackage[dvipsnames]{xcolor}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\RequirePackage{morewrites}
\RequirePackage{tikzinput}
\usetikzlibrary{fit}

\usepackage[debug=all,lang=en, mathhub=./tests]{stex}
\usepackage{url,array,float,textcomp}
\usepackage[show]{ed}
\usepackage[hyperref=auto,style=alphabetic]{biblatex}
\addbibresource{\bibfolder/kwarcpubs.bib}
\addbibresource{\bibfolder/extpubs.bib}
\addbibresource{\bibfolder/kwarccrossrefs.bib}
\addbibresource{\bibfolder/extcrossrefs.bib}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{xspace}
\usepackage{hyperref}

\makeindex
\floatstyle{boxed}
\newfloat{exfig}{thp}{lop}
\floatname{exfig}{Example}

\usepackage{stex-tests}

\MakeShortVerb{\|}

\def\scsys#1{{{\sc #1}}\index{#1@{\sc #1}}\xspace}
\def\mmt{\textsc{Mmt}\xspace}
\def\xml{\scsys{Xml}}
\def\mathml{\scsys{MathML}}
\def\omdoc{\scsys{OMDoc}}
\def\openmath{\scsys{OpenMath}}
\def\latexml{\scsys{LaTeXML}}
\def\perl{\scsys{Perl}}
\def\cmathml{Content-{\sc MathML}\index{Content {\sc MathML}}\index{MathML@{\sc MathML}!content}}
\def\activemath{\scsys{ActiveMath}}
\def\twin#1#2{\index{#1!#2}\index{#2!#1}}
\def\twintoo#1#2{{#1 #2}\twin{#1}{#2}}
\def\atwin#1#2#3{\index{#1!#2!#3}\index{#3!#2 (#1)}}
\def\atwintoo#1#2#3{{#1 #2 #3}\atwin{#1}{#2}{#3}}
\def\cT{\mathcal{T}}\def\cD{\mathcal{D}}

\def\fileversion{3.0}
\def\filedate{\today}

\RequirePackage{pdfcomment}

\ExplSyntaxOn\makeatletter
\cs_set_protected:Npn \@comp #1 #2 {
  \pdftooltip {
    \textcolor{blue}{#1}
  } { #2 }
}

\cs_set_protected:Npn \@defemph #1 #2 {
  \pdftooltip { 
    \textbf{\textcolor{magenta}{#1}}
  } { #2 }
}

\def\__omtext_lec#1{#1}
\cs_new_protected:Npn \lec #1 {
  \strut\hfil\strut\null\hfill\__omtext_lec{#1}
}
\makeatother\ExplSyntaxOff

\makeatletter
\let\@stex@oldcomment\comment
\let\@stex@oldendcomment\endcomment

%\RequirePackage{comment}
\RequirePackage{document-structure}
\RequirePackage[hints,solutions,notes]{problem}
\RequirePackage{hwexam}

\let\comment\@stex@oldcomment
\let\endcomment\@stex@oldendcomment

\newif\ifinfulldoc\infulldocfalse
\makeatother

\def\basedocurl{https://github.com/slatex/sTeX/blob/latex3/doc}
\newcounter{module}

\NewDocumentEnvironment {module}{}{
  \stepcounter{module}
  \textbf{Module \themodule: \smoduletitle}
}{

}
\stexpatchmodule{\begin{module}}{\end{module}}

\def\compemph#1{\textcolor{blue}{#1}}
\def\symrefemph#1{\textcolor{green}{#1}}

\RequirePackage{pdfcomment}
\makeatletter
\protected\def\compemph@uri#1#2{%
  \pdftooltip{%
    \srefsymuri{#2}{\compemph{#1}}%
  }{%
    URI: \detokenize{#2}%
  }%
}
\protected\def\symrefemph@uri#1#2{%
  \pdftooltip{%
    \srefsymuri{#2}{\symrefemph{#1}}%
  }{%
    URI: \detokenize{#2}%
  }%
}
\makeatother