\documentclass{stex}
\libinput{docpreamble}
\begin{document}

  \begin{sfragment}{Tutorial}
    \usemodule{macros?AllMacros}
    \stexexamplefile{tutorial/monoid_1_plain.en.tex}[gobble=2,firstline=5,lastline=9]

    \stexexamplefile{tutorial/monoid_2_symdecl.en.tex}[gobble=2,firstline=5,lastline=13]

    \stexexamplefile{tutorial/monoid_3_symdef.en.tex}[gobble=2,firstline=5,lastline=18,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit
    }]

    \stexexamplefile{tutorial/monoid_4_usemodule.en.tex}[gobble=2,firstline=5,lastline=21,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    }]

    \stexexamplefile{tutorial/monoid_5_vardef.en.tex}[gobble=2,firstline=5,lastline=22,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    },classoffset=9,morekeywords={
      \\vx
    }]

    \stexexamplefile{tutorial/monoid_6_assoc.en.tex}[gobble=2,firstline=5,lastline=23,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    },classoffset=9,morekeywords={
      \\vx
    }]

    \stexexamplefile{tutorial/monoid_7_mathstructure.en.tex}[gobble=2,firstline=5,lastline=24,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    },classoffset=9,morekeywords={
      \\vx
    }]
    \stexexamplefile{tutorial/monoid_instances_1.en.tex}[gobble=2,firstline=5,lastline=10,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    },classoffset=9,morekeywords={
      \\vx,\\ma,\\mb
    }]

    \stexexamplefile{tutorial/monoid_instances_2.en.tex}[gobble=2,firstline=5,lastline=16,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset,op
    },classoffset=9,morekeywords={
      \\vx,\\ma,\\mb,\\vy,\\vz,\\M
    }]

    \stexexamplefile{tutorial/monoid_7b_external.en.tex}[gobble=2,firstline=5,lastline=26,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset
    },classoffset=9,morekeywords={
      \\vx
    }]

    \stexexamplefile{tutorial/monoid_8_types.en.tex}[gobble=2,firstline=5,lastline=28,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset,
    \\funspace,\\collection
    },classoffset=9,morekeywords={
      \\vx
    }]

    \stexexamplefile{tutorial/monoid_9_sdefinition.en.tex}[gobble=2,firstline=5,lastline=28,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset,
    \\funspace,\\collection
    },classoffset=9,morekeywords={
      \\vx
    }]

    \begin{sexample}
      \begin{mdframed}[linewidth=1pt,backgroundcolor=white]\small
        \hfill File \texttt{stexthm.sty}
        \lstinputlisting[language=sTeX,firstline=47,lastline=56]{stexthm.sty}
      \end{mdframed}
    \end{sexample}

    \begin{sexample}
      \begin{mdframed}[linewidth=1pt,backgroundcolor=white]\small
        \hfill File \texttt{stex-highlighting.sty}
        \lstinputlisting[language=sTeX,firstline=4,lastline=10]{stex-highlighting.sty}
        \lstinputlisting[language=sTeX,firstline=15,lastline=21]{stex-highlighting.sty}
      \end{mdframed}
    \end{sexample}

    \stexexamplefile{ex/Associative.en.tex}[gobble=2,firstline=5,lastline=31,classoffset=1,morekeywords={
    \\fun,\\eq,\\inset,
    \\funspace,\\collection,\\associative
    },classoffset=9,morekeywords={
      \\vx,\\op,\\vy,\\vz,\\vU
    }]

    \stexexamplefile{tutorial/monoid_10_inlineass.en.tex}[gobble=2,firstline=5,lastline=31,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset,
    \\funspace,\\collection,\\associative
    },classoffset=9,morekeywords={
      \\vx
    }]

    \stexexamplefile{tutorial/monoid_sequence_1.en.tex}[gobble=2,firstline=5,lastline=9,classoffset=1,morekeywords={
    \\mathstruct,\\monoid,\\universe,\\op,\\unit,\\fun,\\eq,\\inset,
    \\funspace,\\collection,\\associative
    },classoffset=9,morekeywords={
      \\Ms
    }]

  \end{sfragment}
  
\end{document}
