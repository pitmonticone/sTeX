\ProvidesPackage{scalatex}[2021/07/23]

\ifcsname if@scalatex\endcsname\else
	\expandafter\newif\csname if@scalatex\endcsname
	\@scalatexfalse
\fi

\if@scalatex\else
	\def\scalatex@directHTML#1{}
	% usage: plain HTML as argument, e.g.
	% \scalatex@directHTML{<div>foo</div>}
	
	\def\scalatex@annotateHTML#1{}
	\def\scalatex@annotateHTMLEnd{}
	% usage: First argument: attributes and styles
	% attribute names may contain URL prefixes
	% styles should be prefixed with style:
	% second argument: The stuff that gets annotated
	% e.g.
	%\scalatex@annotateHTML{scalatex:mycolor="grey",style:fontsize="150\%"}hello\scalatex@annotateHTMLEnd

	\def\scalatex@addNamespaceAbbrev#1#2{}
	% e.g. \scalatex@addNamespaceAbbrev{stex}{http://kwarc.info/ns/sTeX}
\fi

\ifcsname ExplSyntaxOn\endcsname
	\ExplSyntaxOn
		\prg_new_conditional:Nnn \scalatex_if: {p, T, F, TF} {
			\if@scalatex
				\prg_return_true:
			\else:
				\prg_return_false:
			\fi:
		}
		\cs_new_protected:Npn\scalatex_direct_HTML:n #1 {
			\scalatex_if:T {\cs:w scalatex@directHTML\cs_end:{#1}}
		}
		\cs_new_protected:Npn\scalatex_annotate_HTML_begin:n #1 {
			\scalatex_if:T {\cs:w scalatex@annotateHTML\cs_end:{#1}}
		}
		\cs_new_protected:Nn\scalatex_annotate_HTML_end: {
			\scalatex_if:T {\cs:w scalatex@annotateHTMLEnd\cs_end:}
		}
		\cs_new_protected:Npn\scalatex_annotate_HTML:nn #1 #2 {
			\scalatex_if:TF {
				\scalatex_annotate_HTML_begin:n{#1}
					#2
				\scalatex_annotate_HTML_end:
			}{#2}
		}
		\cs_new_protected:Npn\scalatex_add_Namespace:nn #1 #2 {
			\scalatex_if:T {
				\cs:w scalatex@addNamespaceAbbrev\cs_end:{#1}{#2}
			}
		}
	\ExplSyntaxOff
\fi

\protected\def\ScaLaTeX{%
  \@ifundefined{texorpdfstring}%
  {\let\texorpdfstring\@firstoftwo}%
  {}%
  \texorpdfstring{S\kern-.35ex\raisebox{.5ex}{\scriptsize C}\kern-.65ex\raisebox{-0ex}{\scriptsize A}\kern-.5ex\LaTeX}{ScaLaTeX}\xspace%
}
\let\scalatex\ScaLaTeX