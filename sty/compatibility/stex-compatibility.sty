\ProvidesExplPackage{stex-compatibility}{2021/08/01}{1.9}{bla}
%\RequirePackage[lang={de,en,ro,tr,fr}]{stex}
\RequirePackage[lang=en]{stex}

\cs_new:Nn \stex_capitalize:n { \uppercase{#1} }

\let\iprec\infprec


\NewDocumentCommand \term { m } {
  \msg_set:nnn{stex}{warning/deprecated}{
    \c_backslash_str term~is~deprecated!\\
    No~replacement~exists~yet.\\
    Current~file:~\stex_path_to_string:N \g_stex_currentfile_seq
  }
  \msg_warning:nn{stex}{warning/deprecated}
  #1
}


\NewDocumentCommand \Definame { O{} m } {
  \stex_get_symbol:n { #2 }
  \str_set:Nx \l_tmpa_str {
    \prop_item:cn { g_stex_symdecl_ \l_stex_get_symbol_uri_str _prop } { name }
  }
  \exp_args:NNno \str_replace_all:Nnn \l_tmpa_str {-} {~}
  \stex_ref_new_sym_target:n \l_stex_get_symbol_uri_str
  \scalatex_if:TF {
    \stex_annotate:nnn { definiendum } { \l_stex_get_symbol_uri_str } { 
      \l_tmpa_str
     }
  } {
    \defemph@uri {
      \exp_after:wN \stex_capitalize:n \l_tmpa_str
    } { \l_stex_get_symbol_uri_str }
  }
}

\NewDocumentCommand \Definiendum { O{} m m } {
  \stex_get_symbol:n { #2 }
  \str_set:Nx \l_tmpa_str {
    \prop_item:cn { g_stex_symdecl_ \l_stex_get_symbol_uri_str _prop } { name }
  }
  \exp_args:NNno \str_replace_all:Nnn \l_tmpa_str {-} {~}
  \stex_ref_new_sym_target:n \l_stex_get_symbol_uri_str
  \scalatex_if:TF {
    \stex_annotate:nnn { definiendum } { \l_stex_get_symbol_uri_str } { 
      \l_tmpa_str
     }
  } {
    \defemph@uri {
      \exp_after:wN \stex_capitalize:n \l_tmpa_str
    } { \l_stex_get_symbol_uri_str }
  }
}

\NewDocumentCommand \Symname { O{} m }{
  \stex_symname_args:n { #1 }
  \stex_get_symbol:n { #2 }
  \str_set:Nx \l_tmpa_str {
    \prop_item:cn { g_stex_symdecl_ \l_stex_get_symbol_uri_str _prop } { name }
  }
  \exp_args:NNno \str_replace_all:Nnn \l_tmpa_str {-} {~}
  \let\compemph_uri_prev:\compemph@uri
  \let\compemph@uri\symrefemph@uri
  \exp_args:NNx \use:nn
  \stex_invoke_symbol:n { { \l_stex_get_symbol_uri_str }![
    \exp_after:wN \stex_capitalize:n \l_tmpa_str
      \l_stex_symname_post_str
  ] }
  \let\compemph@uri\compemph_uri_prev:
}

% omtext:
\def\__omtext_lec#1{#1}
\cs_new_protected:Npn \lec #1 {
  \strut\hfil\strut\null\hfill\__omtext_lec{#1}
}
\cs_new_protected:Npn \nlex #1 {
  \textcolor{green}{{\sl #1}}  
}

\cs_new_protected:Npn \nlcex #1 {
  *\;\textcolor{green}{{\sl #1}}  
}

\newcommand\hateq{\ensuremath{\widehat=}\xspace}
\newcommand\hatequiv{\ensuremath{\widehat\equiv}\xspace}
\@ifundefined{ergo}%
{\newcommand\ergo{\ensuremath{\leadsto}\xspace}}%
{\renewcommand\ergo{\ensuremath{\leadsto}\xspace}}%
\newcommand{\reflect@squig}[2]{\reflectbox{$\m@th#1\rightsquigarrow$}}%
\newcommand\ogre{\ensuremath{\mathrel{\mathpalette\reflect@squig\relax}}\xspace}%
\newcommand\notergo{\ensuremath{\not\leadsto}}
\newcommand\notogre{\ensuremath{\not\mathrel{\mathpalette\reflect@squig\relax}}\xspace}%

% mathhub convenience macros

\RequirePackage{keyval} % <- get rid of this

\define@key{Gin}{mhrepos}{\def\Gin@mhrepos{#1}}
\newcommand\mhgraphics[2][]{%
  \def\Gin@mhrepos{}\setkeys{Gin}{#1}%
  \includegraphics[#1]{\mhpath\Gin@mhrepos{#2}}}
\newcommand\cmhgraphics[2][]{\begin{center}\mhgraphics[#1]{#2}\end{center}}

\define@key{lst}{mhrepos}{\def\lst@mhrepos{#1}}
\newcommand\lstinputmhlisting[2][]{%
  \def\lst@mhrepos{}\setkeys{lst}{#1}%
  \lstinputlisting[#1]{\mhpath\lst@mhrepos{#2}}}
\newcommand\clstinputmhlisting[2][]{\begin{center}\lstinputmhlisting[#1]{#2}\end{center}}

%%%%%%%%%%%%% CHEATING --> implement us %%%%%%%%%%%%%%%%%%
\newcommand\assdef[2][]{#2}
\newcommand\impdec[1]{#1}
\newenvironment{inlineAssertion}{}{}
\newcommand\spidea[2][]{#2}
\newenvironment{seqnarray}[1][]{\begin{eqnarray*}}{\end{eqnarray*}}
\newcommand\gstructure[3][]{\importmodule[#1]{#3}}
\newcommand\fassign[3]{}
\newcommand\vassign[2]{}
\newcommand\tassign[2]{}
\newenvironment{gviewsig}[4][]{}{}
\newenvironment{gviewnl}[5][]{}{}
\newenvironment{mhview}[5][]{}{}
\newenvironment{sblockquote}[1][]{}{}
\newcommand\DCMcreators[1]{}
\newcommand\DCMdate[1]{}


\newcommand\hypernym[3][1]{}
%\newcommand\sref[2][]{}
\newcommand\srefs[3][]{}



\def\black#1{\textcolor{black}{#1}}
\def\gray#1{\textcolor{gray}{#1}}
\def\blue#1{\textcolor{blue}{#1}}
\def\red#1{\textcolor{red}{#1}}
\def\green#1{\textcolor{green}{#1}}
\def\cyan#1{\textcolor{cyan}{#1}}
\def\magenta#1{\textcolor{magenta}{#1}}
\def\brown#1{\textcolor{brown}{#1}}
\def\yellow#1{\textcolor{yellow}{#1}}
\def\orange#1{\textcolor{orange}{#1}}
