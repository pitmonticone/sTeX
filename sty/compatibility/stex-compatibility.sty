\ProvidesExplPackage{stex-compatibility}{2021/08/01}{1.9}{bla}
%\RequirePackage[lang={de,en,ro,tr,fr}]{stex}
\RequirePackage{stex}

\NewDocumentCommand \Definiendum { O{} m m } {
  \stex_get_symbol:n { #2 }
  \stex_ref_new_sym_target:n \l_stex_get_symbol_uri_str
  \rustex_if:TF {
    \stex_annotate:nnn { definiendum } { \l_stex_get_symbol_uri_str } { 
      \stex_capitalize:n #3
     }
  } {
    \defemph@uri {
      \stex_capitalize:n #3
    } { \l_stex_get_symbol_uri_str }
  }
}

% weird --------------------------------------------------------------

\RequirePackage{keyval} % <- get rid of this, should be ifpackageloaded{graphicx}

\define@key{Gin}{mhrepos}{\def\Gin@mhrepos{#1}}
\newcommand\mhgraphics[2][]{%
  \def\Gin@mhrepos{}\setkeys{Gin}{#1}%
  \includegraphics[#1]{\mhpath\Gin@mhrepos{#2}}}
\newcommand\cmhgraphics[2][]{\begin{center}\mhgraphics[#1]{#2}\end{center}}

\define@key{lst}{mhrepos}{\def\lst@mhrepos{#1}}
\newcommand\lstinputmhlisting[2][]{%
  \def\lst@mhrepos{}\setkeys{lst}{#1}%
  \lstinputlisting[#1]{\mhpath\lst@mhrepos{#2}}}
\newcommand\clstinputmhlisting[2][]{\begin{center}\lstinputmhlisting[#1]{#2}\end{center}}
